(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[953],{953:function(e,i,t){"use strict";t.d(i,{m:function(){return Ni}});var r=t(41799),s=t(99534),n=t(85893),a=t(67294),o=t(1411),c=t(69396),l=t(62611),d=t(19233),u=t(51258),p=t(81674),v=t(48081),m=t(40325),h=t(90824),w=t(80415),x=t(74937);class f{static get instance(){return this._instance||(this._instance=new f),this._instance}initialize(){this.initPromise=new Promise((e=>{window.onSimplicityDataAvailable=i=>e(i);const i=document.getElementsByTagName("script")[0],t=document.createElement("script");t.src="https://simplicity.trustpilot.com/simplicity.js",t.onerror=()=>e(""),i&&i.parentNode&&i.parentNode.insertBefore(t,i)}))}async getSimplicityData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;return this.initPromise||this.initialize(),Promise.race([this.initPromise,new Promise((i=>{setTimeout((()=>i("")),Math.max(0,e-(Date.now()-this.initTimestamp)))}))])}constructor(){this.initTimestamp=Date.now(),this.initialize()}}var b=t(33613),_=t(83522),g=t(27761),j=t(16793),y=t(69348);var k=e=>{let{reviewId:i,reviewText:t,reviewTitle:s,highlightingEnabled:c}=e;const{fetch:l}=(0,x.i)(),{isLoggedIn:d}=(0,o.xO)(),u=(0,b.T)(),p=a.useContext(h.Il),[m,k]=a.useState(!1),[N,I]=a.useState(!1),[C,L]=a.useState(!1),[P,T]=a.useState({}),S=(0,v.r$)(i,u.id);return(0,n.jsx)(_.Z,{businessUnitId:u.id,businessUnitIdentifyingName:u.identifyingName,businessLinkUrl:S,reviewId:i,reviewText:t,reviewTitle:s,highlightingEnabled:c,loading:N,disabled:C,isModalOpen:m,disabledReasonsReasons:P,onOpenHandler:async()=>{if(I(!0),!d)return void(0,v.rf)();const e=await(async(e,i)=>await(await e("/api/businessunitprofile/service-reviews/".concat(i,"/compliance-data"))).json())(l,i);if(p.track("Button Clicked",{name:"notify-compliance",action:"notify-compliance",alreadyFlagged:!e.canNotify}),!e.canNotify)return L(!0),I(!1);T(e.disabledReasonsReasons),k(!0),I(!1)},onCloseHandler:e=>{p.track("Modal Closed",(0,r.Z)({name:"Notifying Flow"},e)),k(!1)},onSubmit:async e=>{let t;switch(e.violation){case g.i.AdvertisingOrPromotional:t=e.advertisingOrPromotionalReason;break;case g.i.HarmfulOrIllegal:t=e.harmfulOrIllegalReason;break;case g.i.Fabricated:t=e.fabricatedReason;break;case g.i.SensitiveInformation:default:t=g.i.SensitiveInformation}let r=!0;try{const s=await f.instance.getSimplicityData(),n=await(async(e,i,t,r,s,n)=>{const a=(0,y.E)(t),o={[a.reason]:!0},c={fabricatedReview:"",marketingOrSpam:"",sensitiveInformation:"",coarseLanguage:""};a.comment&&(c[a.reason]=a.comment);const l={notificationReasons:o,notificationReasonsComments:c,titleSelections:s,contentSelections:n,simplicity:r},d=await e("/api/businessunitprofile/service-reviews/".concat(i,"/compliance-data"),{method:"POST",body:JSON.stringify(l)});if(!d.ok)throw new j.o(d);return await d.json()})(l,i,t,s,e.reviewTitleSelections,e.reviewTextSelections);if(r=n.success,!r)throw new Error("Failed to post review report!")}finally{p.track("Notification Submission Attempted",{success:r,reason:(0,w.ns)(e),subreason:(0,w.Fe)(e)})}}})},N=t(57793),I=t(2468),C=t(82327),L=t(80074);const P={harmfulOrIllegal:{href:"https://support.trustpilot.com/hc/articles/207312237",trackingProps:{name:"review-flagged",target:"Support 207312237"}},otherReasons:{href:"https://support.trustpilot.com/hc/articles/201748526-User-Guidelines",trackingProps:{name:"user-guidelines",target:"Support 201748526"}}},T=e=>{let{isCurrentConsumer:i,report:t,filtered:r,business:s}=e;if(!t)return null;const a=(0,m.c)(t),o="untrue_course_of_events"===t.reason;if(!a&&!(i&&!a&&r)&&!o)return null;const c=function(e,i,t,r,s){if(r)return"service-review-card/review-alert/review-under-moderation";const n=null===e||void 0===e?void 0:e.toLowerCase();let a="reported-by-robots";"consumer"===n?a="reported-by-consumer":"businessuser"===n&&(a="46d6a890000064000500e0c3"===s?"tp-cpp/reported-by-trustpilot":"reported-by-business");const o=i?"private-view":"public-view";return"service-review-card/review-alert/".concat(t?"harmful-or-illegal":"all-reasons","/").concat(o,"/").concat(a)}(t.source,i,a,o,s.id),l=a?P.harmfulOrIllegal:P.otherReasons;return(0,n.jsx)(I.w,{appearance:"flagged",name:"report-banner",children:(0,n.jsx)(C.ZT,{variant:"body-m",weight:"heavy",children:(0,n.jsx)(N.x,{id:c,interpolations:{COMPANY:s.displayName,LINK:e=>(0,n.jsx)(L.rU,{color:"inherit",underline:!0,rel:"nofollow",target:"_blank",href:l.href,trackingProps:l.trackingProps,children:e},"1")}})})})};var S=t(92596),R=t(73345),Z=t.n(R),D=t(26805),U=t(27072),B=t(13899),E=t(33221),O=t.n(E);const W=e=>e;var A=e=>{let{text:i,truncate:t,trackingProps:r,maxLength:s=300,textWrapper:o=W}=e;const c=i.substring(0,s),l=i.substring(s),[d,u]=a.useState(l.length>0);return t&&d?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:O().previewText,children:o(c)}),(0,n.jsx)("span",{className:O().truncatedText,children:o(l)}),(0,n.jsx)(B.Q,{name:"read-more",appearance:"subtle",linkProps:{underline:!1},className:O().readMore,onClick:()=>u(!1),trackingProps:r,children:(0,n.jsx)(N.x,{id:"NO_TRANSLATE/service-review-card/actions/read-more/label"})})]}):(0,n.jsx)(n.Fragment,{children:o(i)})},F=t(6559),M=t.n(F);const K=e=>{let{message:i,publishedDate:t,updatedDate:r,businessDisplayName:s,truncate:a}=e;return(0,n.jsxs)(l.Zb,{appearance:"subtle",noPadding:!0,className:M().wrapper,outline:!0,children:[(0,n.jsx)("div",{className:M().iconWrapper,children:(0,n.jsx)(S.J,{content:Z(),appearance:"subtle"})}),(0,n.jsxs)("div",{className:M().content,children:[(0,n.jsxs)("div",{className:M().replyInfo,children:[(0,n.jsx)(C.ZT,{variant:"body-m",weight:"heavy",name:"service-review-business-reply-title",className:M().replyCompany,children:(0,n.jsx)(N.x,{id:"service-review-card/business-reply/title",interpolations:{COMPANYNAME:s}})}),(0,n.jsx)(C.ZT,{variant:"body-m",as:D.i,appearance:"subtle",className:M().replyDate,publishedDate:t,updatedDate:r,dataName:"service-review-business-reply-date"})]}),(0,n.jsx)(C.ZT,{variant:"body-m",className:M().message,name:"service-review-business-reply-text",children:(0,n.jsx)(A,{text:i,truncate:a,trackingProps:{name:"Review reply read more",action:"Expand review reply"},textWrapper:e=>(0,n.jsx)(U.v,{withLineBreaks:!0,escapeHTML:!0,children:e})})})]})]})};var V=t(2779);var H=()=>(0,n.jsx)(I.w,{appearance:"info",name:"pending-banner",children:(0,n.jsx)(C.ZT,{variant:"body-m",children:(0,n.jsx)(N.x,{id:"service-review-card/pending/label",interpolations:{LINK:e=>(0,n.jsx)(L.rU,{color:"inherit",rel:"nofollow",target:"_blank",underline:!0,href:"https://support.trustpilot.com/hc/articles/4870054488082",trackingProps:{name:"pending-review-read-more",target:"Support 4870054488082"},children:e},"pending-review-support")}})})}),z=t(41664),J=t.n(z),q=t(59869),Q=t(46186),Y=t(85273),X=t.n(Y);const G=e=>{let{reviews:i,business:{identifyingName:t}}=e;const[r,s]=a.useState(i.length<3),o=r?i:i.slice(0,3),c=i.length>3&&!r;if(null===i||void 0===i?void 0:i.length)return(0,n.jsxs)(C.ZT,{as:"section",variant:"body-m",children:[(0,n.jsx)(C.ZT,{variant:"body-m",weight:"heavy",children:(0,n.jsx)(N.x,{id:"service-review-card/product-reviews/label"})}),o.map((e=>{let{productId:i,name:r,processedName:s,rating:a,imageUrl:o}=e;return(0,n.jsxs)("div",{className:X().review,children:[(0,n.jsx)("div",{className:X().imageWrapper,children:(0,n.jsx)(Q.l,{imageUrl:o,alt:r,size:"48x48"})}),(0,n.jsxs)("div",{className:X().content,children:[(0,n.jsx)(J(),{href:(0,v.$h)(t,s,i),passHref:!0,prefetch:!1,children:(0,n.jsx)(L.rU,{className:X().link,underline:!0,trackingProps:{target:"Product Profile page",name:"Product review",placement:"Review card"},children:r})}),(0,n.jsx)(q.Z,{size:"small",rating:a,variant:"review"})]})]},i)})),c?(0,n.jsx)(B.Q,{name:"show-all-product-reviews",onClick:()=>s(!0),className:X().link,children:(0,n.jsx)(C.ZT,{appearance:"inherit",variant:"body-m",as:"span",children:(0,n.jsx)(N.x,{id:"service-review-card/product-reviews/show-all",interpolations:{COUNT:i.length}})})}):null]})};var $=t(22996),ee=t.n($);const ie=e=>{let{className:i,children:t}=e;return(0,n.jsx)("div",{className:(0,v.AK)(ee().wrapper,i),children:t})};var te=t(48),re=t(11944),se=t.n(re),ne=t(86748),ae=t.n(ne);const oe=e=>{let{onDeleteReview:i}=e;const[t]=(0,te.T)(),[r,s]=a.useState(!1);return(0,n.jsxs)(B.Q,{name:"delete-review",onClick:async()=>{s(!0),confirm(t["service-review-card/delete-review/confirmation"])?(await i(),s(!1)):s(!1)},trackingProps:{name:"delete-review",action:"Delete review"},"aria-label":t["service-review-card/actions/delete-review/label"],disabled:r,appearance:"subtle",size:"s",className:(0,v.AK)(ae().actionButtons,ae().button),children:[(0,n.jsx)(S.J,{content:se(),color:"currentColor",width:14,height:14}),(0,n.jsx)(C.ZT,{variant:"body-m",as:"span",appearance:"inherit",children:(0,n.jsx)(N.x,{id:"service-review-card/actions/delete-review/button"})})]})};var ce=t(67358),le=t.n(ce);const de=e=>{let{reviewId:i}=e;const[t]=(0,te.T)();return(0,n.jsxs)(L.rU,{href:(0,v.lI)(i),rel:"nofollow",title:t["service-review-card/actions/edit-review/title"],name:"edit-review",appearance:"subtle",className:(0,v.AK)(ae().actionButtons,ae().button),trackingProps:{name:"edit-review",target:"Evaluate page",legacyEventName:"EditReviewButtonClicked",reviewId:i},children:[(0,n.jsx)(S.J,{content:le(),color:"currentColor",width:14,height:14}),(0,n.jsx)(C.ZT,{variant:"body-m",as:"span",appearance:"inherit",children:(0,n.jsx)(N.x,{id:"service-review-card/actions/edit-review/label"})})]})};var ue=t(48591),pe=t(68578),ve=t(8706),me=t.n(ve),he=t(14111);var we=t(65424),xe=t(89468),fe=t.n(xe);const be=e=>{let{likes:i,showButton:t,onShowMoreButtonClick:r,onMount:s}=e;return a.useEffect((()=>{s()}),[s]),(0,n.jsxs)(n.Fragment,{children:[i.map(((e,i,t)=>{let{consumerDisplayName:r,consumerId:s}=e;return(0,n.jsx)(L.rU,{variant:"body-m",className:fe().userProfileLink,href:(0,v.Xg)(s),children:"".concat(r).concat(i<t.length-1?",":"")},s)})),t?(0,n.jsx)(we.Sn,{name:"show-all-likes",appearance:"secondary",size:"s",className:fe().showMoreButton,onClick:r,children:(0,n.jsx)(N.x,{id:"service-review-card/find-useful/show-all"})}):null]})},_e=e=>{var{count:i,isLikedByCurrentConsumer:t}=e,a=(0,s.Z)(e,["count","isLikedByCurrentConsumer"]);const o=t?"action":"subtle";return(0,n.jsxs)(B.Q,(0,c.Z)((0,r.Z)({name:"find-useful",appearance:o,className:(0,v.AK)(ae().actionButtons,ae().button)},a),{children:[(0,n.jsx)(S.J,{content:me(),color:"currentColor",width:14,height:14}),(0,n.jsxs)(C.ZT,{variant:"body-m",as:"span",appearance:"inherit",className:fe().usefulLabel,children:[(0,n.jsx)(N.x,{id:"service-review-card/actions/find-useful/button"}),i>0?(0,n.jsx)(C.ZT,{weight:"heavy",variant:"body-m",as:"span",appearance:o,name:"find-useful-count",children:i}):null]})]}))},ge=e=>{let{likes:i,reviewId:t}=e;const{track:r}=a.useContext(h.Il),{consumer:s,isLoggedIn:c}=(0,o.xO)(),{fetch:l}=(0,x.i)(),d=(0,he.k)("smaller-than","tablet-small"),[u,p]=a.useState(i),[m,w]=a.useState(!1),[f,b]=a.useState(!1),[_,g]=a.useState(!1),y=a.useRef(!1),[k,I]=a.useState([]),[C,P]=a.useState(!1),T=[...k].reverse().slice(0,5);a.useEffect((()=>{i>0&&!C&&(c||_)&&async function(){y.current=!0;try{const e=await(async(e,i)=>await(await e("/api/businessunitprofile/service-reviews/".concat(i,"/likes"))).json())(l,t);w(e.isLikedByCurrentConsumer),P(!0),I(e.likes)}catch(e){}y.current=!1}()}),[i,c,_,l,t,C]);const R=async e=>{if(r("FindUsefulButtonClicked",{reviewId:t}),!0===y.current)return;if(y.current=!0,!c)return void(0,v.rf)();if(!s.hasAcceptedTerms)return void(0,v.DU)();const i=!e;w(i);try{const e=await(async(e,i,t)=>{const r=await e("/api/businessunitprofile/service-reviews/".concat(i,"/likes"),{method:"POST",body:JSON.stringify({reviewId:i,consumerLikesReview:t})});if(!r.ok)throw new j.o(r);return await r.json()})(l,t,i);if(!e.success)return;i?(I((e=>[...e,{consumerDisplayName:s.displayName,consumerId:s.id}])),p((e=>++e))):(I((e=>e.filter((e=>{let{consumerId:i}=e;return i!==s.id})))),p((e=>--e))),y.current=!1}catch(n){y.current=!1,n instanceof j.o&&(0,v.hK)(null===n||void 0===n?void 0:n.response.status)}};return!d&&u>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ue.u,{placement:"bottom",tooltipText:(0,n.jsx)(be,{likes:T,showButton:u>5,onShowMoreButtonClick:()=>b(!0),onMount:()=>g(!0)}),children:(0,n.jsx)(_e,{count:u,onClick:()=>R(m),isLikedByCurrentConsumer:m})}),(0,n.jsxs)(pe.u_,{name:"likes",isOpen:f,onClose:()=>b(!1),children:[(0,n.jsxs)(pe.xB,{children:[(0,n.jsx)("span",{className:fe().iconWrapper,children:(0,n.jsx)(S.J,{content:me()})}),(0,n.jsx)(N.x,{id:"service-review-card/find-useful/modal/title",interpolations:{COUNT:k.length}})]}),(0,n.jsx)(pe.hz,{children:(0,n.jsx)("div",{className:fe().userProfileLinksWrapper,children:k.map((e=>{let{consumerId:i,consumerDisplayName:t}=e;return(0,n.jsx)(L.rU,{className:fe().userProfileLink,href:(0,v.Xg)(i),title:t,children:t},i)}))})})]})]}):(0,n.jsx)(_e,{count:u,onClick:()=>R(m),isLikedByCurrentConsumer:m})};var je=t(9538);const ye=e=>{let{reviewId:i,businessUnitId:t}=e;const[r]=(0,te.T)(),s=(0,v.r$)(i,t);return(0,n.jsxs)(je.g,{href:s,rel:"nofollow",target:"_blank",title:r["service-review-card/actions/reply-as-business/title"],name:"reply-as-company",className:(0,v.AK)(ae().actionButtons,ae().button),trackingProps:{name:"reply-as-company",target:"Business App",legacyEventName:"ReplyAsCompany"},children:[(0,n.jsx)(S.J,{content:Z(),appearance:"inherit",width:14,height:14}),(0,n.jsx)(C.ZT,{variant:"body-m",as:"span",appearance:"inherit",children:(0,n.jsx)(N.x,{id:"service-review-card/actions/reply-as-business/label"})})]})};var ke=t(60857),Ne=t(75849),Ie=t.n(Ne),Ce=t(67643),Le=t.n(Ce),Pe=t(83914),Te=t.n(Pe),Se=t(61928),Re=t(9388);var Ze=t(17102),De=t(47270),Ue=t.n(De);const Be=e=>{let{businessUnitId:i,reviewId:t}=e;const[r]=(0,te.T)(),s=(0,v.n5)(t,i),a=(0,Ze.e)("tp-b2b-selected-business-unit-id");return(0,n.jsx)(ke.h,{name:"style-review",icon:Ue(),iconPosition:"right",appearance:"outline",wide:!0,size:"m",onClick:()=>{(0,Ze.d)(a,i,{domain:location.hostname.split(".").splice(-2).join("."),path:"/",sameSite:"Strict"}),window.open(s,"_blank")},trackingProps:{action:"ShareReviewInBusinessApp",name:"share-in-business-app"},title:r["service-review-card/share/share-in-business-app/long"],children:(0,n.jsx)(N.x,{id:"service-review-card/share/share-in-business-app/short"})})};var Ee=t(13870),Oe=t.n(Ee);const We=e=>function(e,i,t){const s=(0,r.Z)({copyhistory:!1,directories:!1,location:!1,menubar:!1,resizable:!1,scrollbars:!0,status:!1,toolbar:!1},t);s.left=s.left||screen.width/2-s.width/2,s.top=s.top||screen.height/2-s.height/2;const n=Object.keys(s).map((e=>"".concat(e,"=").concat(Number(s[e])))).join(",");return window.open(e,i,n)}(e,"_blank",{height:600,resizable:!0,width:600}),Ae=e=>{const i=(0,v.WT)(e);return i.startsWith("/")?"".concat(window.location.origin).concat(i):i},Fe=e=>{let{review:i,consumer:t,business:r,isB2BUserForBU:s}=e;const[a]=(0,te.T)();return(0,n.jsx)(Re.W,{modalTitle:(0,n.jsx)(N.x,{id:"service-review-card/actions/share-review/title"}),tooltipTriggers:["click"],trackingProps:{name:"share-review"},placement:"bottom",button:(0,n.jsxs)(B.Q,{name:"share-review",appearance:"subtle","aria-label":a["service-review-card/actions/share-review/title"],className:(0,v.AK)(ae().actionButtons,ae().button),children:[(0,n.jsx)(S.J,{content:Ie(),color:"currentColor",width:14,height:14}),(0,n.jsx)(C.ZT,{variant:"body-m",as:"span",appearance:"inherit",children:(0,n.jsx)(N.x,{id:"service-review-card/actions/share-review/button"})})]}),children:(0,n.jsxs)("div",{className:Oe().wrapper,children:[(0,n.jsx)(ke.h,{name:"share-facebook",icon:Le(),iconPosition:"left",appearance:"outline",wide:!0,size:"m",onClick:()=>We("https://www.facebook.com/sharer/sharer.php?display=popup&u=".concat(Ae(i.id))),trackingProps:{action:"Share Review",name:"share-on-facebook"},children:"Facebook"}),(0,n.jsx)(ke.h,{name:"share-twitter",icon:Te(),iconPosition:"left",appearance:"outline",wide:!0,size:"m",onClick:async()=>{const e=Ae(i.id),s=We("about:blank");if(s){const o=await(await fetch("/social/urlshortener?url=".concat(e))).json(),c=o.url?o.url:e,l=(n=c,a[(0,Se.$)("service-review-card/share/review-twitter-text",i.rating)].replace("[Company]",r.displayName).replace("[Username]",t.displayName).replace("[X]",i.rating.toString()).replace("[Link]",n));s.location.href="https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(l))}var n},trackingProps:{action:"Share Review",name:"share-on-twitter"},children:"Twitter"}),s?(0,n.jsx)(Be,{reviewId:i.id,businessUnitId:r.id}):null]})})};var Me=t(62563);const Ke=e=>{let{experiencedDate:i,publishedDate:t}=e;const r=i||t;return(0,n.jsxs)(C.ZT,{name:"service-review-date-of-experience",variant:"body-m",color:"black",children:[(0,n.jsxs)(C.ZT,{variant:"body-m",as:"b",weight:"heavy",children:[(0,n.jsx)(N.x,{id:"service-review-card/date-of-experience"}),":"]})," ",(0,n.jsx)(Me.PS,{date:r,format:{day:"2-digit",month:"long",year:"numeric"}})]})},Ve=e=>{let{title:i,text:t,truncate:r}=e;return i===t?null:(0,n.jsx)(C.ZT,{variant:"body-l",color:"black",name:"service-review-text",children:(0,n.jsx)(A,{text:t,truncate:r,trackingProps:{name:"Review read more",action:"Expand review"},textWrapper:e=>(0,n.jsx)(U.v,{escapeHTML:!0,withLineBreaks:!0,withEmphasis:!0,children:e})})})},He=e=>{let{filtered:i,dates:t,className:s=""}=e;return(0,n.jsxs)(C.ZT,{variant:"body-m",appearance:"subtle",as:"div",className:s,children:[(0,n.jsx)(D.i,(0,c.Z)((0,r.Z)({},t),{dataName:"service-review-date"})),i?(0,n.jsx)(C.ZT,{variant:"body-m",weight:"heavy",children:(0,n.jsx)(N.x,{id:"service-review-card/removed"})}):null]})};var ze=t(50141),Je=t.n(ze),qe=t(63948),Qe=t.n(qe);const Ye=e=>{let{children:i,icon:t}=e;return(0,n.jsxs)(C.ZT,{variant:"body-m",as:"div",className:Qe().detailsIcon,appearance:"subtle",children:[(0,n.jsx)(S.J,{content:t,color:"currentColor",width:14,height:14}),(0,n.jsx)("span",{children:i})]})},Xe=e=>{let{icon:i,label:t,children:r,trackingProps:s}=e;return(0,n.jsx)("div",{className:Qe().reviewLabel,children:(0,n.jsx)(Re.W,{button:(0,n.jsx)("button",{"data-review-label-tooltip-trigger":!0,className:Qe().reviewLabelButton,children:(0,n.jsx)(Ye,{icon:i,children:t})}),modalTitle:t,trackingProps:s,tooltipTriggers:["hover","focus"],children:r})})},Ge=e=>{let{businessIdentifyingName:i}=e;return(0,n.jsx)(Xe,{icon:Je(),label:(0,n.jsx)(N.x,{id:"service-review-card/review-labels/merged/label"}),trackingProps:{name:"Merged"},children:(0,n.jsx)(C.ZT,{variant:"body-m",children:(0,n.jsx)(N.x,{id:"service-review-card/review-labels/merged/tooltip",interpolations:{"COMPANY-URL":i,LINK:e=>(0,n.jsx)(L.rU,{href:"https://support.trustpilot.com/hc/articles/360015370220?utm_campaign=merged&utm_content=merged_review_tooltip&utm_medium=referral&utm_source=CPP",target:"_blank",trackingProps:{name:"support-article-merged-review",target:"Support 360015370220"},children:e},"1")}})})})};var $e=t(69136),ei=t.n($e),ii=t(13127),ti=t.n(ii);const ri={"Not verified":{icon:"",label:""},Invited:{icon:ei(),label:(0,n.jsx)(N.x,{id:"service-review-card/review-labels/invited/label"})},Verified:{icon:ei(),label:(0,n.jsx)(N.x,{id:"service-review-card/review-labels/verified/label"})},Redirected:{icon:ti(),label:(0,n.jsx)(N.x,{id:"service-review-card/review-labels/redirected/label"})}},si={"Not verified":(0,c.Z)((0,r.Z)({},ri["Not verified"]),{tooltip:""}),"Invited manual":(0,c.Z)((0,r.Z)({},ri.Invited),{tooltip:(0,n.jsx)(N.x,{id:"service-review-card/review-labels/invited/invited-manual/tooltip",interpolations:{LINK:e=>(0,n.jsx)(L.rU,{href:"https://support.trustpilot.com/hc/articles/223402468?utm_campaign=invited_manual&utm_content=invited_tooltipl&utm_medium=referral&utm_source=CPP",trackingProps:{name:"support-article-invited-manual",target:"Support 223402468"},target:"_blank",children:e},"Invited manual"),BOLD:e=>(0,n.jsx)("b",{children:e},"Invited manual")}})}),"Invited basic link":(0,c.Z)((0,r.Z)({},ri.Invited),{tooltip:(0,n.jsx)(N.x,{id:"service-review-card/review-labels/invited/invited-basic-link/tooltip",interpolations:{LINK:e=>(0,n.jsx)(L.rU,{href:"https://support.trustpilot.com/hc/articles/223402468?utm_campaign=invited_basic_link&utm_content=invited_tooltipl&utm_medium=referral&utm_source=CPP",trackingProps:{name:"support-article-invited-basic-link",target:"Support 223402468"},target:"_blank",children:e},"Invited basic link")}})}),"Invited self-inviter":(0,c.Z)((0,r.Z)({},ri.Invited),{tooltip:(0,n.jsx)(N.x,{id:"service-review-card/review-labels/invited/invited-self-inviter/tooltip",interpolations:{LINK:e=>(0,n.jsx)(L.rU,{href:"https://support.trustpilot.com/hc/articles/223402468?utm_campaign=invited_self_inviter&utm_content=invited_tooltipl&utm_medium=referral&utm_source=CPP",trackingProps:{name:"support-article-self-inviter",target:"Support 223402468"},target:"_blank",children:e},"Invited self-inviter"),BOLD:e=>(0,n.jsx)("b",{children:e},"Invited manual")}})}),"Verified automatic":(0,c.Z)((0,r.Z)({},ri.Verified),{tooltip:(0,n.jsx)(N.x,{id:"service-review-card/review-labels/verified/verified-automatic/tooltip",interpolations:{LINK:e=>(0,n.jsx)(L.rU,{href:"https://support.trustpilot.com/hc/articles/223402468?utm_campaign=verified_automatic&utm_content=verified_tooltipl&utm_medium=referral&utm_source=CPP",trackingProps:{name:"support-article-verified-automatic",target:"Support 223402468"},target:"_blank",children:e},"Verified automatic"),BOLD:e=>(0,n.jsx)("b",{children:e},"Verified automatic")}})}),"Verified DoE":(0,c.Z)((0,r.Z)({},ri.Verified),{tooltip:(0,n.jsx)(N.x,{id:"service-review-card/review-labels/verified/verified-doe/tooltip",interpolations:{LINK:e=>(0,n.jsx)(L.rU,{href:"https://support.trustpilot.com/hc/articles/201819697-?utm_medium=referral&utm_source=verified_order_learn_more&utm_campaign=consumer_verified_order&utm_content=verified_compliance",trackingProps:{name:"support-article-verified-doe",target:"Support 201819697"},target:"_blank",children:e},"Verified DoE"),BOLD:e=>(0,n.jsx)("b",{children:e},"Verified DoE")}})}),Redirected:(0,c.Z)((0,r.Z)({},ri.Redirected),{tooltip:(0,n.jsx)(N.x,{id:"service-review-card/review-labels/redirected/redirected/tooltip",interpolations:{LINK:e=>(0,n.jsx)(L.rU,{href:"https://support.trustpilot.com/hc/articles/223402468?utm_campaign=redirected&utm_content=redirected_tooltip&utm_medium=referral&utm_source=CPP",trackingProps:{name:"support-article-redirected",target:"Support 223402468"},target:"_blank",children:e},"Redirected")}})})};const ni=e=>{const[i,t]=function(e,i){let{createdDateTime:t,isVerified:r,reviewSourceName:s,verificationLevel:n,verificationSource:a}=e;const o=()=>-1!==["Kickstart","CopyPasteInvitation","FileUploadInvitation","ManualInputInvitation"].indexOf(s),c=()=>{const e=new Date(t),i=new Date("2020-10-02");return-1!==["InvitationLinkApi","BusinessGeneratedLink","LegacyUniqueLink","UniqueLink","EmbeddedBusinessGeneratedLinkForm","EmbeddedUniqueLinkForm"].indexOf(s)&&e>=i};if(n)switch(n){case"verified":return"complianceDocumentation"===a?["Verified","Verified DoE"]:["Verified","Verified automatic"];case"invited":if(o())return["Invited","Invited manual"];if(c())return["Invited","Invited self-inviter"];if("BasicLink"===s)return i?["Not verified","Not verified"]:["Invited","Invited basic link"];break;case"redirected":return["Redirected","Redirected"];case"not-verified":return["Not verified","Not verified"]}return r?"complianceDocumentation"===a?["Verified","Verified DoE"]:o()?["Invited","Invited manual"]:c()?["Invited","Invited self-inviter"]:["Verified","Verified automatic"]:"BasicLink"===s?i?["Not verified","Not verified"]:["Invited","Invited basic link"]:"DomainLink"===s?["Redirected","Redirected"]:["Not verified","Not verified"]}(e,(0,p.hz)("consumer-site-basic-link-deprecation"));if("Not verified"===i)return null;const{icon:r,label:s,tooltip:a}=si[t];return(0,n.jsx)(Xe,{icon:r,label:s,trackingProps:{name:"Review Label Tooltip",tooltip:t,label:i},children:(0,n.jsx)(C.ZT,{variant:"body-m",children:a})})};var ai=t(47957),oi=t.n(ai);const ci=e=>{let{merged:i,verification:t,className:s}=e;return(0,n.jsxs)("div",{className:(0,v.AK)(oi().reviewLabels,s),children:[i?(0,n.jsx)(Ge,(0,r.Z)({},i)):null,t?(0,n.jsx)(ni,(0,r.Z)({},t)):null]})},li=e=>{let{filtered:i,title:t,id:r}=e;return i?(0,n.jsx)(C.ZT,{variant:"heading-s",as:"h2",name:"service-review-title",children:(0,n.jsx)(U.v,{escapeHTML:!0,withEmphasis:!0,children:t})}):(0,n.jsx)(L.rU,{href:(0,v.WT)(r),color:"inherit",name:"review-title",trackingProps:{name:"review-title",target:"Single review"},rel:"nofollow",children:(0,n.jsx)(C.ZT,{variant:"heading-s",as:"h2",name:"service-review-title",children:(0,n.jsx)(U.v,{escapeHTML:!0,withEmphasis:!0,children:t})})})};var di=t(52128),ui=t.n(di);const pi=a.forwardRef(((e,i)=>{let{id:t,rating:s,dates:{experiencedDate:o,publishedDate:l,updatedDate:d},filtered:u,labels:p,title:w,text:x,report:f,pending:b,hasUnhandledReports:_,isHidden:g,language:j,truncate:y}=e;const k={publishedDate:l,reportedDate:g&&_||(0,m.J)(f)?f.createdDateTime:null,updatedDate:d},{locale:N}=a.useContext(h.Il),I=N.startsWith(j||"")?null:j;return(0,n.jsxs)("section",{className:ui().reviewContentwrapper,ref:i,children:[(0,n.jsxs)("div",{className:ui().reviewHeader,"data-service-review-rating":s,children:[(0,n.jsx)(q.Z,{rating:s,size:"medium",variant:g?"other":"review"}),b?null:(0,n.jsx)(He,{dates:k,filtered:u,className:ui().datesWrapper}),g?null:(0,n.jsx)(ci,(0,c.Z)((0,r.Z)({},p),{className:ui().reviewLabels}))]}),(0,n.jsxs)("div",{className:(0,v.AK)(ui().reviewContent,g&&ui().hidden),"aria-hidden":g,lang:I,"data-review-content":!0,children:[(0,n.jsx)(li,{filtered:g||u,id:t,title:w}),(0,n.jsx)(Ve,{title:w,text:x,truncate:y}),g?null:(0,n.jsx)(Ke,{experiencedDate:o,publishedDate:l})]})]})}));const vi=e=>{let{businessUnitId:i,businessUnitIdentifyingName:t,dates:r,id:s,isCurrentConsumer:n,hasUnhandledReports:o,rating:c,report:l,positionInList:d}=e;const{track:u}=a.useContext(h.Il),p=!n&&!(o&&null!==l);return((e,i,t,r)=>{const s=a.useRef(),n=r||s,o=a.useRef(e);a.useEffect((()=>{o.current=e}),[e]);const c=a.useRef(t);a.useEffect((()=>{c.current=t}),[t]);const[l,d]=a.useState(),u=a.useRef(),p=a.useRef(!1);return a.useEffect((()=>{const e=new IntersectionObserver((e=>{let[i]=e;return d(i)}),c.current);return e.observe(n.current),u.current=e,()=>e.disconnect()}),[n]),a.useEffect((()=>{let e;return(null===l||void 0===l?void 0:l.isIntersecting)&&(e=setTimeout((()=>{p.current||(p.current=!0,u.current.unobserve(n.current),o.current())}),i)),()=>clearTimeout(e)}),[l,n,i]),n})((()=>{var e,n;p&&u("ReviewViewed",{businessUnitId:i,domain:t,numberOfDaysLive:(e=new Date(r.publishedDate),n=new Date,Math.floor((n.getTime()-e.getTime())/864e5)),numberOfStars:c,positionInList:d,reviewId:s})}),2e3,{threshold:.5})};var mi=t(77387),hi=t.n(mi);const wi=e=>{var{showConsumerInfo:i,showActions:t,showReply:a,showProductReviews:h,isB2BUserForBU:w,business:x,review:{consumer:f,reply:b,productReviews:_},handleDeleteReview:g,className:j="",positionInList:y,stacked:N}=e,I=(0,s.Z)(e.review,["consumer","reply","productReviews"]);const{isLoaded:C,isLoggedIn:L,consumer:P}=(0,o.xO)(),S=C&&L&&(null===P||void 0===P?void 0:P.id)===f.id,{selected:{search:R}}=(0,u.mN)(),Z=(0,p.hz)("consumer-site-cpp-review-truncation")&&!(null===R||void 0===R?void 0:R.length),D=(0,m.J)(I.report)&&!S,U=!I.filtered&&!I.pending,B=!I.filtered,E=vi((0,r.Z)({businessUnitId:x.id,businessUnitIdentifyingName:x.identifyingName,isCurrentConsumer:S,positionInList:y},I)),O=t&&S,W=t&&C&&!D,A=a&&!D&&!!b,F=h&&!D&&(null===_||void 0===_?void 0:_.length);return(0,n.jsxs)(l.Zb,{name:"service-review-card",as:"article",className:(0,v.AK)(hi().reviewCard,j),outline:!0,appearance:N?"subtle":"default",children:[i?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(V.Q,(0,c.Z)((0,r.Z)({},f),{hasUnhandledReports:I.hasUnhandledReports})),(0,n.jsx)(d.i,{appearance:"subtle",className:hi().cardDivider})]}):null,(0,n.jsx)(pi,(0,c.Z)((0,r.Z)({},I),{isHidden:D,ref:E,truncate:Z})),F?(0,n.jsx)(G,{reviews:_,business:x}):null,I.pending&&(0,n.jsx)(H,{}),(0,n.jsx)(T,{isCurrentConsumer:S,report:I.report,filtered:I.filtered,business:x}),O?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.i,{appearance:"subtle",className:hi().cardDivider}),(0,n.jsxs)(ie,{className:hi().actionsWrapper,children:[B&&(0,n.jsx)(de,{reviewId:I.id}),(0,n.jsx)(oe,{onDeleteReview:g}),U&&(0,n.jsx)(Fe,{review:I,consumer:f,business:x,isB2BUserForBU:w})]})]}):W?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.i,{appearance:"subtle",className:hi().cardDivider}),(0,n.jsxs)(ie,{className:hi().actionsWrapper,children:[(0,n.jsx)(ge,{likes:I.likes,reviewId:I.id}),(0,n.jsx)(Fe,{review:I,consumer:f,business:x,isB2BUserForBU:w}),w?(0,n.jsx)(ye,{reviewId:I.id,businessUnitId:x.id}):null,(0,n.jsx)("div",{className:hi().actionsRightSide,children:(0,n.jsx)(k,{reviewId:I.id,reviewTitle:I.title,reviewText:I.text,highlightingEnabled:!0})})]})]}):null,A?(0,n.jsx)(K,(0,c.Z)((0,r.Z)({},b),{businessDisplayName:x.displayName,truncate:Z})):null]})};var xi=t(8081),fi=t.n(xi),bi=t(57057),_i=t(31940),gi=t.n(_i);const ji=e=>{var{reviewId:i,numberOfReviews:t,query:o}=e,l=(0,s.Z)(e,["reviewId","numberOfReviews","query"]);const d=t-1,{track:u}=a.useContext(h.Il),[p,m]=a.useState(),[w,f]=a.useState(!1),[b,_]=a.useState(!1),g=w&&p,j=a.useRef(),{fetch:y}=(0,x.i)(),k="/api/businessunitprofile/service-reviews/".concat(i,"/stack").concat((0,bi.Q)(o).toLowerCase());a.useEffect((()=>{!p&&w&&async function(){_(!0);try{const{reviews:e}=await(await y(k)).json();m(e)}catch(e){}_(!1)}()}),[w,p,y,k]);return a.useEffect((()=>{var e;j.current&&g&&(e=j.current)&&(e.style.height="".concat(e.scrollHeight,"px"))}),[g]),(0,n.jsxs)("div",{className:gi().wrapper,"data-service-review-stack":!0,"data-service-review-stack-count":t,children:[(0,n.jsx)(we.Sn,{name:"review-stack-show",wide:!0,size:"s",appearance:"secondary",className:(0,v.AK)(gi().button,{[gi().buttonOpen]:g}),onClick:()=>{var e;w?((e=j.current)&&(e.style.height="0px"),setTimeout((()=>f(!1)),600)):(f(!0),u("ReviewStackExpanded",{reviewsInStack:d}))},busy:b,children:b?null:(0,n.jsxs)(n.Fragment,{children:[g?(0,n.jsx)(N.x,{id:"service-review-card/stack/disclaimer"}):(0,n.jsx)(Se.A,{id:"service-review-card/stack/button",pluralNumber:d,interpolations:{"COMPANY-NAME":l.business.displayName}}),(0,n.jsx)(S.J,{content:fi(),appearance:"inherit"})]})}),g?(0,n.jsx)("div",{className:gi().stack,ref:j,children:p.map(((e,i)=>(0,n.jsx)(wi,(0,c.Z)((0,r.Z)({showConsumerInfo:!1,showActions:!0,showReply:!0,review:e,className:gi().reviewCard,positionInList:i+1},l),{stacked:!0}),e.id)))}):null]})};var yi=t(77763),ki=t.n(yi);const Ni=e=>{var{showStack:i,isB2BUserForBU:t,business:c,review:l,showProductReviews:d,location:u,className:p,onDelete:m,positionInList:w}=e,f=(0,s.Z)(e,["showStack","isB2BUserForBU","business","review","showProductReviews","location","className","onDelete","positionInList"]);const{isLoaded:b,isLoggedIn:_,consumer:g}=(0,o.xO)(),j=b&&_&&(null===g||void 0===g?void 0:g.id)===l.consumer.id,[y,k]=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>null;const{track:t}=a.useContext(h.Il),[r,s]=a.useState(!1),{fetch:n}=(0,x.i)();return[r,async()=>{try{await n("/api/businessunitprofile/service-reviews/".concat(e),{method:"DELETE"}),t("Review Deleted",{reviewId:e}),s(!0),setTimeout((()=>i()),300)}catch(r){alert("Coudln't delete your review, something unexpected happened")}}]}(l.id,m),N=!!u?l.consumersReviewCountOnSameLocation:l.consumersReviewCountOnSameDomain,I=i&&N>1&&!j;return(0,n.jsxs)("div",{className:(0,v.AK)(ki().cardWrapper,y?ki().hide:ki().show,p),children:[(0,n.jsx)(wi,(0,r.Z)({handleDeleteReview:k,isB2BUserForBU:t,business:c,review:l,showProductReviews:d,positionInList:w},f)),I?(0,n.jsx)(ji,{numberOfReviews:N,reviewId:l.id,isB2BUserForBU:t,business:c,showProductReviews:d,query:u?{selectedLocationId:u.id}:void 0}):null]})}},2779:function(e,i,t){"use strict";t.d(i,{Q:function(){return w}});var r=t(85893),s=(t(67294),t(48)),n=t(9538),a=t(82327),o=t(80950),c=t.n(o),l=t(84779),d=t(61928),u=t(48081),p=t(92596),v=t(62362),m=t.n(v);const h=e=>{let{children:i,icon:t,name:s}=e;return(0,r.jsxs)(a.ZT,{variant:"body-m",as:"div",className:m().detailsIcon,appearance:"subtle",name:s,children:[(0,r.jsx)(p.J,{content:t,color:"currentColor",width:14,height:14}),(0,r.jsx)("span",{children:i})]})},w=e=>{let{id:i,displayName:t,imageUrl:o,numberOfReviews:p,countryCode:v,hasUnhandledReports:w,isVerified:x}=e;const f=v&&!w,b=(0,u.Xg)(i),[_]=(0,s.T)();return(0,r.jsx)("aside",{className:m().consumerInfoWrapper,"aria-label":_["service-review-card/consumer-information/consumer-info-wrapper/aria-label"].replace("[USERNAME]",t),children:(0,r.jsxs)("div",{className:m().consumerDetailsWrapper,children:[(0,r.jsx)(l.s,{id:i,displayName:t,imageUrl:o,isVerified:x}),(0,r.jsxs)(n.g,{name:"consumer-profile",className:m().consumerDetails,href:b,trackingProps:{target:"Consumer profile",name:"consumer-info"},rel:"nofollow",children:[(0,r.jsx)(a.ZT,{name:"consumer-name",as:"span",variant:"heading-xxs",className:m().consumerName,children:t}),(0,r.jsxs)("div",{className:m().consumerExtraDetails,"data-consumer-reviews-count":p,children:[(0,r.jsx)(a.ZT,{variant:"body-m",as:"span",appearance:"subtle",name:"consumer-reviews-count",children:(0,r.jsx)(d.A,{id:"service-review-card/consumer-information/review-count",pluralNumber:p})}),f?(0,r.jsx)(h,{icon:c(),name:"consumer-country",children:v.toUpperCase()}):null]})]})]})})}},31940:function(e){e.exports={wrapper:"styles_wrapper___KV6P",stack:"styles_stack__YPSK8",reviewCard:"styles_reviewCard__i6fe6",button:"styles_button__pwkHk",buttonOpen:"styles_buttonOpen__u_Lrt"}},77763:function(e){e.exports={cardWrapper:"styles_cardWrapper__LcCPA",show:"styles_show__HUXRb",hide:"styles_hide___UUyV"}},6559:function(e){e.exports={wrapper:"styles_wrapper__ib2L5",iconWrapper:"styles_iconWrapper__demic",content:"styles_content__Hl2Mi",message:"styles_message__shHhX",replyInfo:"styles_replyInfo__FYSje",replyCompany:"styles_replyCompany__ro_yX",replyDate:"styles_replyDate__Iem0_"}},62362:function(e){e.exports={consumerInfoWrapper:"styles_consumerInfoWrapper__KP3Ra",consumerDetailsWrapper:"styles_consumerDetailsWrapper__p2wdr",consumerDetails:"styles_consumerDetails__ZFieb",consumerExtraDetails:"styles_consumerExtraDetails__fxS4S",detailsIcon:"styles_detailsIcon__Fo_ua"}},85273:function(e){e.exports={review:"styles_review__fjjnG",link:"styles_link__tiEbH",imageWrapper:"styles_imageWrapper__FaZg9",content:"styles_content__TqSSW"}},86748:function(e){e.exports={actionButtons:"buttons_actionButtons__cCIZv",button:"buttons_button__uNj0b"}},89468:function(e){e.exports={userProfileLink:"styles_userProfileLink__uqauA",userProfileLinksWrapper:"styles_userProfileLinksWrapper__jPAqs",showMoreButton:"styles_showMoreButton__sgk95",iconWrapper:"styles_iconWrapper__cEfVr",usefulLabel:"styles_usefulLabel__qz3JV"}},13870:function(e){e.exports={wrapper:"styles_wrapper__ZUkHA",iconButton:"styles_iconButton__H1l_X",iconWrapper:"styles_iconWrapper___YvOv"}},22996:function(e){e.exports={wrapper:"styles_wrapper__GfGYg"}},63948:function(e){e.exports={reviewLabel:"styles_reviewLabel__IPaZd",detailsIcon:"styles_detailsIcon__yqwWi",reviewLabelButton:"styles_reviewLabelButton__SNIsL"}},47957:function(e){e.exports={reviewLabels:"styles_reviewLabels__nHPUT"}},52128:function(e){e.exports={reviewContentwrapper:"styles_reviewContentwrapper__zH_9M",reviewHeader:"styles_reviewHeader__iU9Px",datesWrapper:"styles_datesWrapper__RCEKH",reviewLabels:"styles_reviewLabels__Ym2vM",reviewContent:"styles_reviewContent__0Q2Tg",hidden:"styles_hidden__e1fsL"}},77387:function(e){e.exports={reviewCard:"styles_reviewCard__hcAvl",cardDivider:"styles_cardDivider__42s_0",actionsWrapper:"styles_actionsWrapper__q1pnO",actionsRightSide:"styles_actionsRightSide__Bzast"}},33221:function(e){e.exports={previewText:"styles_previewText__fjJ8_",truncatedText:"styles_truncatedText__p7j1F",readMore:"styles_readMore__niBjQ"}}}]);
//# sourceMappingURL=953-22542a3b490ccd36.js.map